!function(a,b){function g(b,c){this.element=b,this.options=a.extend({},f,c),this._defaults=f,this._name=e,this.fields=[],g.prototype.options=this.options,this.init()}var e="propertySearch",f={title:"Property Search",id:"propertydiv",progressid:"progressDialog",messageid:"progressMessage",services:{url:"http://maps.raleighnc.gov/ArcGIS/rest/services/Services/ServicesIMaps/MapServer/identify",categories:[{title:"Voting",services:[{title:"Precinct [PRECINCT] Polling Place",labels:"[POLL_PL];[ST_NUMBER] [ST_NAME:proper], [CITY:proper]",layerId:1,url:""},{title:"State Senate District [DISTRICT]",labels:"[NAME] ([PARTY]);<a href='[WEBSITE]' target='_blank'>Website</a>",layerId:2},{title:"US House District [DISTRICT]",labels:"[NAME] ([PARTY]);<a href='[WEBSITE]' target='_blank'>Website</a>",layerId:3},{title:"State House District [DISTRICT]",labels:"[NAME] ([PARTY]);<a href='[WEBSITE]' target='_blank'>Website</a>",layerId:4},{title:"Wake County Commissioners District [DISTRICT]",labels:"[NAME];<a href='http://www.wakegov.com/commissioners/districts/Pages/district[DISTRICT].aspx' target='_blank'>Website</a>",layerId:5},{title:"Board of Education District [DISTRICT]",labels:"[NAME];<a href='http://www.wcpss.net/Board/boeinfo.html' target='_blank'>Website</a>",layerId:6},{title:"Raleigh Council District [DISTRICT]",labels:"[NAME];<a href='http://www.raleighnc.gov/home/content/BoardsCommissions/Articles/CityCouncil.html' target='_blank'>Website</a>",layerId:7},{title:"Cary Council District [DIST]",labels:"[REP];<a href='http://www.townofcary.org/Departments/Town_Clerk_s_Office/Cary_Town_Council.htm' target='_blank'>Website</a>",layerId:8}]},{title:"Planning",services:[{title:"Angier Zoning",labels:"[CLASS]",layerId:11},{title:"Apex Zoning",labels:"[CLASS]",layerId:12},{title:"Cary Zoning",labels:"[NAME]",layerId:13},{title:"County Zoning",labels:"[CLASS]",layerId:14},{title:"Fuquay-Varina Zoning",labels:"[CLASS]",layerId:15},{title:"Garner Zoning",labels:"[CLASS]",layerId:16},{title:"Holly Springs Zoning",labels:"[CLASS]",layerId:17},{title:"Knightdale Zoning",labels:"[CLASS]",layerId:18},{title:"Morrisville Zoning",labels:"[CLASS]",layerId:19},{title:"Rolesville Zoning",labels:"[CLASS]",layerId:20},{title:"Wake Forest Zoning",labels:"[CLASS]",layerId:21},{title:"Wendell Zoning",labels:"[CLASS]",layerId:22},{title:"Zebulon Zoning",labels:"[CLASS]",layerId:23},{title:"City Limit",labels:"[LONG_NAME:proper]",layerId:24},{title:"Planning Jurisdiction (ETJ)",labels:"[JURISDICTION:proper]",layerId:25},{title:"Raleigh Annexation Year",labels:"[CASE_YEAR]",layerId:27},{title:"Raleigh Future Landuse",labels:"[Land_Use]",layerId:28},{title:"Subdivision",labels:"[NAME:proper]",layerId:29},{title:"Development Plans",labels:"File #: [CASE];Name: [FILE_NAME:proper]",layerId:30}]},{title:"Solid Waste",services:[{title:"Collection Day",labels:"[TRASH_COLLECTION_DAY];<a href='[URL]' target='_blank'>Website</a>;<a href='[HOLIDAY_URL]' target='_blank'>Holiday Schedule</a>",layerId:32},{title:"Trash Collection Route",labels:"[Trash Route]",layerId:33},{title:"Yardwaste Collection Route",labels:"[Yardwaste Route]",layerId:33},{title:"Bi-Weekly Recycling Collection",labels:"Route: [Recycling Route]",layerId:33},{title:"Bi-Weekly Recycling Collection",labels:"Collection Day:[Collection Day];Rollout Phase: <a href='http://www.raleighnc.gov/content/SolidWaste/Documents/[Collection Day:upper].pdf' target='_blank'>[PHASE]</a>;Rollout Start Date:[PHASE_DATE];Recycling Week: <a href='http://www.raleighnc.gov/content/SolidWaste/Documents/Calendars2012/[Collection Day][WEEK].pdf' target='_blank'>[WEEK]</a>",layerId:34}]},{title:"Public Safety",services:[{title:"Sheriff Zone",labels:"[DISTRICT]",layerId:36},{title:"Raleigh Police Beat",labels:"[Name]",layerId:37},{title:"Garner Police Beat",labels:"[Name]",layerId:38},{title:"Fire Insurance District",labels:"[District]",layerId:39},{title:"County Fire Response District",labels:"[District]",layerId:40},{title:"Raleigh Fire Response District",labels:"[District]",layerId:41},{title:"EMS Franchise District",labels:"[District:proper]",layerId:42},{title:"EMS Response District",labels:"[District:proper]",layerId:43}]},{title:"Environmental",services:[{title:"Floodplain",labels:"[ZONE_IMAPS]",layerId:45},{title:"Soils",labels:"[NAME]",layerId:46},{title:"Hydrologic Unit",labels:"[HUC_CODE]",layerId:47},{title:"Critical Wastershed",labels:"[PROPWS]",layerId:48},{title:"Drainage Basin",labels:"[BASINS:proper]",layerId:50}]},{title:"City of Raleigh Assessments",services:[{title:"Assement Liens",labels:"Account #: [Account];Type: [Type];Status: [Status];Confirmed: [Confirmed Date];<a href='http://www.raleighnc.gov/home/content/Finance/Articles/OtherPaymentInformatio.html' target='_blank'>Website</a>",layerId:52}]}]}};g.prototype={init:function(){dojo.require("esri.layers.graphics");var b=a("<h3>"+this.options.title+"</h3>"),c=a("<div id='"+this.options.id+"' class='paneldiv'></div>");a(this.element).append(b),a(this.element).append(c),c.append("Search By  ");var d=a("<select id='propertySelect'></select>"),e="<option>Address</option>";e+="<option>Street Name</option>",e+="<option>Owner</option>",e+="<option>PIN</option>",e+="<option>REID</option>",d.append(e),c.append(d);var f=a("<div></div>"),g=a("<input id='propertyinput' type='search'></input>");f.append(g),c.append(f),this.createAutoComplete(g),this.addTabs(c),a(d).kendoDropDownList({change:function(){a("#propertyinput").val(" ")}}),a(".k-header",c).css("background-color","#444"),this.createResultsGrid(a("#resultsContainer")),this.checkUrl()},addTabs:function(b){var c=this,d=a("<div id='proptabs'></div>");b.append(d);var e=a("<ul id='tabsul'></ul>");d.append(e),e.append("<li id='resultstab' value='results' title='Results' class='tabli enabled'><img src='./img/results_selected.png'></img></li>"),b.append("<div id='resultsContainer' class='tabcontainer header visible'></div>"),e.append("<li class='tabli disabled' value='info' title='Property Information'><img src='./img/info_disabled.png'></img></li>"),b.append("<div id='infoContainer' class='tabcontainer header invisible'></div>"),e.append("<li class='tabli disabled' value='photos' title='Building Photos'><img src='./img/photo_disabled.png'></img></li>"),b.append("<div id='photoContainer' class='tabcontainer invisible'><div id='photodiv' class='propertydiv'></div></div>"),e.append("<li class='tabli disabled' value='deeds' title='Deeds'><img src='./img/deed_disabled.png'></img></li>"),b.append("<div id='deedContainer' class='tabcontainer invisible'></div>"),e.append("<li class='tabli disabled' value='tax' title='Tax Information'><img src='./img/tax_disabled.png'></img></li>"),b.append("<div id='taxContainer' class='tabcontainer invisible'></div>"),e.append("<li class='tabli disabled' value='buffer' title='Buffer'><img src='./img/buffer_disabled.png'></img></li>"),b.append("<div id='bufferContainer' class='tabcontainer invisible'></div>"),e.append("<li class='tabli disabled' value='services' title='Services'><img src='./img/services_disabled.png'></img></li>"),b.append("<div id='servicesContainer' class='tabcontainer invisible' style='overflow-y:auto'></div>"),e.append("<li class='tabli disabled' value='addresses' title='Addresses'><img src='./img/address_disabled.png'></img></li>"),b.append("<div id='addressesContainer' class='tabcontainer invisible'></div>"),b.css("height","100%"),a(".tabli").click(function(){_gaq.push(["_trackEvent","Property Search","Tab Click",this.title]),c.tabClick(a(this))})},createAutoComplete:function(b){var c=this,d=new kendo.data.DataSource({serverFiltering:!0,transport:{read:function(c){a.ajax({url:config.property.soe+"/AutoComplete",dataType:"jsonp",data:{input:b.val(),type:a("#propertySelect option:selected").val(),f:"json"},success:function(a){c.success(a.Results)}})}}});b.kendoAutoComplete({minLength:4,dataSource:d,select:function(b){var d=[];d.push(b.item.text()),_gaq.push(["_trackEvent","Property Search",a("#propertySelect option:selected").val(),b.item.text()]),c.searchRealEstateAccounts(dojo.toJson(d),a("#propertySelect option:selected").val(),!1)},highlightFirst:!0,suggest:!0}),b.closest(".k-autocomplete").css("width","100%"),b.closest(".k-autocomplete").css("margin","5px 0 5px 0")},createResultsGrid:function(c){var e=a("<table id='propResultsGrid' class='compact' style='height:100%;overflow:hidden;'><thead><tr><th>Owner</th><th>Address</th><th>PIN #</th></tr></table>").appendTo(c);g.prototype.t=e.DataTable({paging:!1,info:!1,filter:!1,scrollY:a("#resultsContainer").height(),scrollCollapse:!0}),a(b).bind("resize",function(){g.prototype.refreshGrid()})},refreshGrid:function(){console.log(a("#resultsContainer").height()-26),a(".dataTables_scrollBody").css("height",a("#resultsContainer").height()-26),a(".dataTable").css("width",a("#resultsContainer").width())},searchRealEstateAccounts:function(b,c){g.prototype.refreshGrid();var e=this;e.showProgress(g.prototype.options,"Searching Real Estate..."),a.ajax({url:config.property.soe+"/RealEstateSearch",type:"POST",dataType:"json",data:{values:b,type:c,f:"json"},complete:function(){e.hideProgress(g.prototype.options)},success:function(b){g.prototype.accounts=b.Accounts,a("#propResultsGrid").DataTable().clear(),a.each(b.Accounts,function(b,c){var d=[c.owner,c.siteAddress,c.pin],e=a("#propResultsGrid").dataTable().fnAddData(d),f=a("#propResultsGrid").dataTable().fnGetNodes(e[0]);a(f).attr("data-pin",c.pin),a(f).attr("data-id",b)}),pins=[],a(b.Accounts).each(function(b,c){pins.length<1e3&&-1==a.inArray(c.pin,pins)&&pins.push("'"+c.pin+"'")}),e.fields=b.Fields,b.error||(1==b.Accounts.length?(e.enableTabs(),e.switchTabs(a("#infoContainer")),e.selectTab(1),e.addPropertyInfo(b.Accounts[0],b.Fields)):(e.switchTabs(a("#resultsContainer")),e.selectTab(0),e.disableTabs()),e.addPropertiesToMap(pins,!0)),e.hideProgress(g.prototype.options),a("#propResultsGrid tr").click(function(){pin=a(this).data("pin");var b=a(this).data("id");g.prototype.enableTabs(),g.prototype.switchTabs(a("#infoContainer")),g.prototype.selectTab(1),g.prototype.addPropertyInfo(g.prototype.accounts[b],e.fields),9==pin.length&&(pin="0"+pin),g.prototype.addSinglePropertyToMap(pin,!0)})},error:function(){}})},enableTabs:function(){a(".tabli").removeClass("disabled"),a(".tabli").addClass("enabled"),a(".tabli img").each(function(b,c){var d=a(c).attr("src").replace("_disabled","_default");a(c).attr("src",d)})},disableTabs:function(){a(".tabli").removeClass("enabled"),a(".tabli").addClass("disabled"),a("#resultstab").removeClass("disabled"),a("#resultstab").addClass("enabled"),a(".tabli img").each(function(b,c){if(a(c).parent().index()>0){var d=a(c).attr("src").replace("_default","_disabled");d=d.replace("_selected","_disabled"),a(c).attr("src",d)}})},switchTabs:function(b){a(".tabcontainer").removeClass("visible"),a(".tabcontainer").addClass("invisible"),a(b).removeClass("invisible"),a(b).addClass("visible"),g.prototype.refreshGrid()},tabClick:function(c){var d=c.index();if(c.hasClass("enabled"))switch(this.switchTabs(".tabcontainer:eq("+d+")"),this.selectTab(d),a("img",c).attr("src",a("img",c).attr("src").replace("_default","_selected")),d){case 0:break;case 1:break;case 2:this.getPhotoInfo();break;case 3:this.getDeedInfo();break;case 4:b.open("http://services.wakegov.com/realestate/Account.asp?id="+this.reid,"_blank");break;case 5:this.createBuffer(a("#bufferContainer"));break;case 6:this.getServices();break;case 7:this.getAddresses()}},selectTab:function(b){var c=a("img",".tabli").eq(b).attr("src");c=c.replace("_default","_selected"),a("img",".tabli").eq(b).attr("src",c),a("img",".tabli").not(":eq("+b+")").each(function(b,d){c=a(d).attr("src"),c=c.replace("_selected","_default"),a(d).attr("src",c)})},addPropertyInfo:function(b,c){if(this.pin=b.pin,pin=b.pin,this.reid=b.reid,0==a("#propInfoGrid").length){var d=a("<table id='propInfoGrid' class='compact' style='height:100%;overflow:hidden;'><thead><tr><th>Field</th><th>Value</th></tr></table>").appendTo(a("#infoContainer"));g.prototype.infoT=d.DataTable({paging:!1,info:!1,filter:!1,bSort:!1,scrollY:a("#resultsContainer").height(),scrollCollapse:!0})}for(var e=[],f=0;f<c.length;f++){var h=c[f],i=b[h.field];"currency"==h.type&&(i=this.formatToCurrency(i))," "!=i&&e.push({field:h.alias,value:i})}console.log(e),a("#propInfoGrid").DataTable().clear(),a.each(e,function(b,c){var d=[c.field,c.value],e=a("#propInfoGrid").dataTable().fnAddData(d);a("#propInfoGrid").dataTable().fnGetNodes(e[0])}),"RALEIGH"==b.city.toUpperCase&&this.addCrimeLink(),this.getSepticPermits(this.pin,a("#propInfoGrid")),this.checkWaterAnalysis(this.pin,a("#propInfoGrid"))},addGraphicLayersToMap:function(){this.multipleGl=new esri.layers.GraphicsLayer({id:"propmultgl"}),map.addLayer(this.multipleGl),this.singleGl=new esri.layers.GraphicsLayer({id:"propsinglegl"}),map.addLayer(this.singleGl)},addPropertiesToMap:function(b,c){this.multipleGl&&this.singleGl||this.addGraphicLayersToMap();var d=this,e="PIN_NUM IN ("+b.toString()+")",f=new esri.tasks.Query;f.where=e,f.returnGeometry=!0,f.outFields=["PIN_NUM","OWNER","SITE_ADDRESS","REID","CITY_DECODE"];var h=new esri.tasks.QueryTask(config.property.propertyService);d.showProgress(g.prototype.options,"Searching Map..."),h.execute(f,function(b){d.hideProgress(g.prototype.options),d.multipleGl.clear(),d.singleGl.clear(),a(b.features).each(function(a,c){c.setSymbol(new esri.symbol.SimpleFillSymbol(config.property.symbolMultiple)),d.multipleGl.add(c),1==b.features.length&&d.addSinglePropertyToMap(c.attributes.PIN_NUM,!0)}),c&&d.multipleGl.graphics.length>0&&map.setExtent(esri.graphicsExtent(d.multipleGl.graphics),!0)},function(){d.hideProgress(g.prototype.options)})},addSinglePropertyToMap:function(b){var d=this,e=map.getLayer("propmultgl"),f=map.getLayer("propsinglegl");a(e.graphics).each(function(a,c){require(["esri/symbols/SimpleFillSymbol"],function(a){c.attributes.PIN_NUM==b&&(d.selProp=c,c.setSymbol(new a(config.property.symbolSingle)),e.remove(c),f.clear(),f.add(c),map.setExtent(c.geometry.getExtent(),!0),c.attributes.CITY_DECODE&&"RALEIGH"==c.attributes.CITY_DECODE.toUpperCase()&&d.addCrimeLink(c.geometry.getExtent().getCenter()))})})},addCrimeLink:function(b){a("#propInfoGrid").data("kendoGrid").dataSource.add({field:"Crime Activity",value:"<a href='http://int7p4e2/gis/crime?location="+b.x+","+b.y+"' target='_blank'>View</a>"}),a("#propInfoGrid").data("kendoGrid").refresh()},getSepticPermits:function(b){var d=this;d.showProgress(g.prototype.options,"Searching Septic Permits..."),a.ajax({url:config.property.soe+"/SepticPermits",dataType:"json",data:{pin:b,f:"json"},success:function(b){d.hideProgress(g.prototype.options),a(b.SepticPermits).each(function(b,c){var d=c.permitNumber,e=["Septic Permit","<a href='http://gisasp2.wakegov.com/imaps/RequestedPermit.aspx?permit="+d+"' target='_blank'>"+d+"</a>"],f=a("#propInfoGrid").dataTable().fnAddData(e);a("#propInfoGrid").dataTable().fnGetNodes(f[0])})},error:function(){d.hideProgress(g.prototype.options)}})},checkWaterAnalysis:function(b){var d=this;d.showProgress(g.prototype.options,"Searching Water Analysis Samples..."),a.ajax({url:config.property.soe+"/WellResults",dataType:"json",data:{pin:b,f:"json"},success:function(c){if(d.hideProgress(g.prototype.options),c.WellResults.length>0){var e=["Water Samples","<a href='http://justingreco.github.io/water-analysis/app/index.html#/?pin="+b+"' target='_blank'>View</a>"],f=a("#propInfoGrid").dataTable().fnAddData(e);a("#propInfoGrid").dataTable().fnGetNodes(f[0])}},error:function(){d.hideProgress(g.prototype.options)}})},getPhotoInfo:function(){var b=this;b.showProgress(g.prototype.options,"Searching Photos..."),a.ajax({url:config.property.soe+"/PhotoSearch",dataType:"jsonp",data:{reid:this.reid,f:"json"},success:function(c){b.hideProgress(g.prototype.options),a("#photodiv").empty(),a(c.Photos).each(function(b,c){var d="http://services.wakegov.com/realestate/photos/mvideo/"+c.imageDir+"/"+c.imageName;a("#photodiv").append("<img src='"+d+"' style='max-width:100%;max-height:100%'/>")}),a("#photodiv img").click(function(){var c=a("#photowindow");0==c.length&&(c=a("<div id='photowindow'></div>"),a("body").append(c),c.kendoWindow({actions:["Maximize","Close"],visible:!1,width:"500px"})),c.empty(),c.append("<img src='"+a(this).attr("src")+"' style='max-width:100%;max-height:100%'/>"),c.data("kendoWindow").open()})},error:function(){b.hideProgress(g.prototype.options)}})},getDeedInfo:function(){var c=this;a("#deedContainer").css("padding","10px"),c.showProgress(g.prototype.options,"Searching Deeds..."),a.ajax({url:config.property.soe+"/DeedSearch",dataType:"jsonp",data:{reid:this.reid,f:"json"},success:function(d){c.hideProgress(g.prototype.options),a("#deedContainer").empty(),a(d.Deeds).each(function(b,c){a("#deedContainer").append("Book: "+c.deedBook+"<br/>Page: "+c.deedPage+"<br/>Date: "+c.deedDate),"0"!=c.deedDocNum&&a("#deedContainer").append("<h3>Deed Document</h3><button class='deedbutton deedjava btn btn-sm btn-default' value='"+c.deedDocNum+"'>View</button><button class='deedbutton deedpdf btn btn-sm btn-default' value='"+c.deedDocNum+"'>PDF</button>"),"0"!=c.bomDocNum&&a("#deedContainer").append("<h3>Plat Document</h3><button class='deedbutton deedjava btn btn-sm btn-default' value='"+c.bomDocNum+"'>View</button><button class='deedbutton deedpdf btn btn-sm btn-default' value='"+c.bomDocNum+"'>PDF</button>")}),a(".deedbutton").click(function(){_gaq.push(["_trackEvent","Property Search","Deeds",a(this).text()]);var c="http://services.wakegov.com/booksweb/";a(this).hasClass("deedjava")?c+="docview.aspx?docid="+a(this).val():a(this).hasClass("deedpdf")&&(c+="pdfview.aspx?docid="+a(this).val()+"&RecordDate="),b.open(c,"_blank")})},error:function(){c.hideProgress(g.prototype.options)}})},formatToCurrency:function(a){a=a.toString().replace(/\$|\,/g,""),isNaN(a)&&(a="0"),sign=a==(a=Math.abs(a)),a=Math.floor(100*a+.50000000001),cents=a%100,a=Math.floor(a/100).toString(),10>cents&&(cents="0"+cents);for(var b=0;b<Math.floor((a.length-(1+b))/3);b++)a=a.substring(0,a.length-(4*b+3))+","+a.substring(a.length-(4*b+3));return(sign?"":"-")+"$"+a+"."+cents},sortPropertyInfo:function(){},getServices:function(){var a=this;if(a.showProgress(g.prototype.options,"Getting Services..."),this.options.services){var b=this.singleGl.graphics[0].geometry;geomService.simplify([b],function(b){require(["esri/tasks/BufferParameters"],function(c){var d=new c;d.distances=[-5],d.unit=9002,d.geometries=b,geomService.buffer(d,function(b){a.identifyServices(b[0])},function(){a.hideProgress(g.prototype.options)})})},function(){a.hideProgress(g.prototype.options)})}},identifyServices:function(b){var c=this,d=a("#servicesContainer"),e=this.options.services.url;require(["esri/tasks/IdentifyParameters","esri/tasks/IdentifyTask"],function(f,h){var i=new f;i.geometry=b,i.height=map.height,i.width=map.width,i.mapExtent=map.extent,i.layerOption=f.LAYER_OPTION_ALL,i.tolerance=1;var j=new h(e);j.execute(i,function(b){d.empty(),a(g.prototype.options.services.categories).each(function(e,f){var h=0,i=a("<h3>"+f.title+"</h3>");a(i).css("text-decoration","underline").css("background-color","rgb(37,46,65)").css("padding","8px").css("margin-top","0px");var j=a("<div class='servicediv'></div>");a(f.services).each(function(d,e){var f=a(b).filter(function(){return this.layerId==e.layerId});f.length>0&&(a(f).each(function(a,b){0==a&&j.append("<b>"+c.getServiceLabel(e.title,e.layerId,b)+"</b><br/>"),j.append(c.getServiceLabel(e.labels,e.layerId,b)+"<p/>")}),h++)}),h>0&&(d.append(i),d.append(j))}),c.hideProgress(g.prototype.options)},function(){c.hideProgress(g.prototype.options)})})},getServiceLabel:function(a,b,c){for(var d=this,e=a.split("[").length-1,f=0;e>f;f++){var g=a.indexOf("[")+1,h=a.indexOf("]"),i=a.substring(g,h),j=i.split(":");i=j[0];var k=c.feature.attributes[i];j.length>1&&(k=d.checkCase(k,j[1]),a=a.replace(new RegExp(i+":"+j[1],"gi"),i)),a=a.replace("["+i+"]",k)}return a=a.replace(new RegExp(";","gi"),"<br/>")},checkCase:function(a,b){switch(b){case"upper":a=a.toUpperCase();break;case"lower":a=a.toLowerCase();break;case"proper":a=a.toProperCase(),a=a.replace(" Nc"," NC")}return a},createBuffer:function(b){var c=this;if(0==b.children().length){b.css("padding","10px"),b.append("Distance");var d=a("<span style='margin:0 10px 0 10px;'></span>").appendTo(b),e=a("<input id='propertyBufferDistance' type='number'></input>").css("width","100px").appendTo(d),f=a("<button>Buffer</button>").button().appendTo(b);e.kendoNumericTextBox({format:"# ft",min:0,max:5e3,step:50,value:500}),f.click(function(){if(c.selProp){var b=parseInt(a("#propertyBufferDistance").val());require(["esri/tasks/BufferParameters","esri/tasks/GeometryService","esri/tasks/query","esri/tasks/QueryTask"],function(a,d,e,f){var g=new a;g.distances=[b],g.unit=d.UNIT_FOOT,g.geometries=[c.selProp.geometry],geomService.buffer(g,function(a){var b=new f(config.property.propertyService),c=new e;c.outFields=["PIN_NUM"],c.geometry=a[0],b.execute(c,function(){},function(){})},function(){})})}})}},getAddresses:function(){},checkUrl:function(){require(["esri/urlUtils"],function(a){var c=a.urlToObject(b.location.href);if(c.query){var d=c.query;if(d.pins){var e=d.pins.split(",");g.prototype.searchRealEstateAccounts(dojo.toJson(e),"pin",!1)}}})},showProgress:function(b,c){var d=a("#"+b.progressid),e=a("#"+b.messageid);d.length>0&&e.length>0&&(e.html(c),d.dialog("open"))},hideProgress:function(b){var c=a("#"+b.progressid);c.length>0&&c.dialog("close")}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)?a.isFunction(g.prototype[b])&&a.data(this,"plugin_"+e)[b]():a.data(this,"plugin_"+e,new g(this,b))})}}(jQuery,window,document);